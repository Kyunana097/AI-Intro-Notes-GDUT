# 2.3.1 产生式

### 产生式（Production Rule）的定义

> 在**人工智能**（专家系统、知识表示）中：  
> **产生式** = **IF 条件 THEN 结论/动作** 的**规则表示法**  
> 又称 **IF-THEN 规则**、**产生式规则**。

**形式化语法**：

```
〈规则〉 ::= IF 〈前提〉 THEN 〈结论〉 [〈置信度〉]
```

- **前提**（LHS, Left-Hand Side）：  
  任意逻辑表达式（谓词、模式、事实集合）；可为**合取**、**析取**、**模糊条件**。

- **结论**（RHS, Right-Hand Side）：  
  可**断言新事实**、**删除旧事实**、**触发动作**、**调用函数**。

- **推理方向**：  
  1. **正向链接**（数据驱动）：事实 → 匹配 → 激活 → 得到新事实。  
  2. **反向链接**（目标驱动）：假设目标 → 匹配 → 递归求证前提。

---

### 经典例子

| 编号 | 产生式规则                                            | 说明             |
| ---- | ----------------------------------------------------- | ---------------- |
| 1    | `IF 天气 ∧ 是阴天 ∧ 湿度 > 80 THEN 可能下雨 {CF 0.7}` | 天气预报专家系统 |
| 2    | `IF 动物 ∧ 有毛发 THEN 该动物是哺乳动物`              | 动物识别系统     |
| 3    | `IF 患者体温 > 38.5 ∧ 咳嗽天数 > 3 THEN 建议检查流感` | 医疗诊断助手     |
| 4    | `IF 库存量 <  reorder_point THEN 下单补货`            | 库存管理机器人   |
| 5    | `IF 当前状态 = 饥饿 ∧ 冰箱 ≠ 空 THEN 吃冰箱里的食物`  | 简单智能体行为   |

---

### 记忆口诀
> **“前因后果，IF-THEN；匹配一次，事实更新。”**

# 2.3.2 产生式系统

### 产生式系统（Production System）的定义

> 一种**基于规则的知识表示与推理框架**，由**事实库**、**规则库**、**推理引擎**三大核心组件组成，通过**匹配-冲突消解-执行**循环实现自动推理或问题求解。

---

#### 形式化描述
```
产生式系统 = (F, R, I)
```
- **F**（Fact Base / Working Memory）：当前**事实集合**（谓词、三元组、对象等）。  
- **R**（Rule Base / Production Memory）：**产生式规则集合**（IF-THEN 形式）。  
- **I**（Inference Engine）：**推理机**，负责：
  1. **模式匹配**（Match）→ 找出所有**可触发规则**（冲突集）。  
  2. **冲突消解**（Conflict Resolution）→ 按策略挑选**唯一规则**。  
  3. **执行**（Act）→ 应用规则，**更新事实库**或**调用外部动作**。

循环三步：**Match → Resolve → Act**，直到**无规则可触发**或**达到目标**。

---

#### 推理方向
| 方向                              | 驱动方式                               | 适用场景             |
| --------------------------------- | -------------------------------------- | -------------------- |
| **正向链接**（Forward Chaining）  | 数据驱动：从新事实出发，不断推出结论   | 监控、诊断、实时决策 |
| **反向链接**（Backward Chaining） | 目标驱动：从假设结论出发，递归验证前提 | 专家咨询、问答、证明 |

---

#### 最小可运行伪代码
```python
while true:
    triggered = [r for r in rules if r.premise.match(facts)]
    if not triggered: break
    rule = conflict_resolution(triggered)   # 例如优先级、最近性
    rule.execute(facts)                     # 添加/删除/修改事实
```

---

#### 一句话速记
> **“事实库放数据，规则库存知识，推理机做循环——匹配-挑选-执行，直到无事可做。”**

# 2.3.4 产生式表示法的特点

## 1.产生式表示法的优点

1. 自然性
2. 模块性
3. 有效性
4. 清晰性

## 2. 产生式表达法的主要缺点

1. 效率不高
2. 不能表达具有结构性的知识

## 3.产生式表示法适合表示的知识

| 知识维度                                   | 适合理由                                                     | 典型实例                                                 |
| ------------------------------------------ | ------------------------------------------------------------ | -------------------------------------------------------- |
| **经验性启发**  （heuristics）             | 人类专家习惯用“如果…就…”描述直觉；无需深模型，一条规则一条经验 | 医疗诊断：IF 体温>38.5 ∧ 咳嗽>3天 THEN 建议流感筛查      |
| **因果-症状**  （associational）           | 条件与结论单向触发，符合“症状→病因/处理”模式                 | 设备故障：IF 振动高 ∧ 温度高 THEN 疑似轴承损坏           |
| **操作型规程**  （procedures / 动作脚本）  | 规则右侧可直接执行动作、API、机器人行为                      | 智能家居：IF 人离开 ∧ 房间空 THEN 关闭空调               |
| **约束-规范**  （regulations）             | 政策、法规、业务条款天然是“条件-结果”列表                    | 银行贷款：IF 收入<5000 ∧ 负债率>50% THEN 拒绝放贷        |
| **可分解决策**  （hierarchical decisions） | 复杂决策能拆成多层“子规则”，冲突消解策略简单                 | 动物识别专家系统：先分“哺乳动物”→再分“食肉动物”→…        |
| **高变动知识**  （volatile knowledge）     | 规则库与事实库分离，增删改一条规则无需重编译系统             | 电商促销：IF 会员等级=Gold ∧ 购物车金额>999 THEN 减100元 |